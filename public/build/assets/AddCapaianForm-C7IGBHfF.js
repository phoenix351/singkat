import{r as l,j as a,b as i,y as P}from"./app-DG4lkm6I.js";import{c as j}from"./calculateAkumulasiAk-uXEeq9rl.js";import{F as t}from"./index-bg-KSOeg.js";import{s as S}from"./index-Cw_285zN.js";import{M as C}from"./index-CP26vVl7.js";import{S as p}from"./index-CdRAOwz7.js";import{D as F}from"./index-Cd_0zI_X.js";import"./PurePanel-X1WZuywX.js";import"./index-BOoDnPea.js";import"./compact-item-CWVgPv4E.js";import"./zoom-CYFUwcOb.js";import"./row-B-yTj_Is.js";import"./index-DPovuAtR.js";import"./useLocale-Bn5sQBMJ.js";import"./ActionButton-BmFTjVmE.js";import"./button-B7yed1Qm.js";import"./index-CQGu2i8L.js";import"./index-C85wRqGF.js";import"./dayjs.min-D2B25P1N.js";const G=({visible:m,onCancel:u})=>{const[r]=t.useForm(),[h,d]=l.useState([]),[b,g]=l.useState([]),[s,k]=S.useMessage(),w=(e,o)=>{const n=j(o);r.setFieldsValue({akumulasi_ak:n})},f=async e=>{try{s.open({key:"submit-form",type:"loading",content:"menambahkan capaian pegawai"});let n=`${new Date(e.tahun).getFullYear()}`;const c={...e};c.tahun=n;const T=await i.post("/capaian",c,{headers:{"Content-Type":"application/json"}});s.open({key:"submit-form",type:"success",content:"telah ditambahkan 1 capaian pegawai"})}catch(o){console.log({error:o}),s.open({key:"submit-form",type:"error",content:o.response.data.error})}finally{P.get("/kelola-ckp",{},{preserveState:!0})}},x=async()=>{try{const{data:e}=await i.get("/api/predikats");console.log({data:e}),d(e)}catch{console.error("Error when get predikat data")}},y=async()=>{try{const{data:e}=await i.get("/api/pegawais");console.log({data:e}),g(e)}catch{console.error("Error when get predikat data")}};return l.useEffect(()=>{x(),y()},[]),a.jsxs(a.Fragment,{children:[k,a.jsx(C,{title:"Tambah CKP",open:m,onCancel:u,style:{top:20},onOk:()=>r.submit(),width:600,okText:"Tambah",cancelText:"Batal",children:a.jsxs(t,{form:r,onValuesChange:w,name:"control-hooks",onFinish:f,style:{maxWidth:600},layout:"vertical",wrapperCol:{span:24},autoComplete:"off",size:"large",children:[a.jsx(t.Item,{name:"pegawai_id",label:"Pegawai",className:"focus:border-none",children:a.jsx(p,{placeholder:"Pilih Pegawai",allowClear:!0,showSearch:!0,optionFilterProp:"label",options:b.map(e=>({label:e.nama,value:e.id}))})}),a.jsx(t.Item,{name:"predikat",label:"Predikat Kinerja",className:"focus:border-none",children:a.jsx(p,{placeholder:"Pilih Predikat",allowClear:!0,showSearch:!0,optionFilterProp:"label",options:h.map(e=>({label:e.nama,value:e.id}))})}),a.jsx(t.Item,{name:"tahun",label:"Tahun Penilaian",children:a.jsx(F,{picker:"year"})}),a.jsx(t.Item,{name:"periode",label:"Periode Penilaian",children:a.jsx(p,{placeholder:"Pilih Periode",allowClear:!0,showSearch:!0,options:[{label:"Tahunan",value:"Tahunan"},{label:"Bulanan",value:"Bulanan"},{label:"Semester 1",value:"Semester 1"},{label:"Semester 2",value:"Semester 2"}]})})]})})]})};export{G as default};
