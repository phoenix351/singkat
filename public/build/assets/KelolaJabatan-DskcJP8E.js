import{r as l,q as A,j as t,Y as E,y as r,a as m}from"./app-D_OB5lB0.js";import{A as P}from"./AuthenticatedLayout-BViSrbYa.js";import{B as K}from"./Breadcrumb-CQBnXcKy.js";import{S as C,P as w}from"./Pagination-CPSxFH7K.js";import F from"./TableJabatan-BZ61UOdG.js";import c from"./JabatanForm-CmcGP_38.js";import{s as T}from"./index-DEkIiiNJ.js";import{R as I}from"./PlusOutlined-DZ7tDEHl.js";import"./Header-56Cko1Qe.js";import"./index-CJaVn-ZZ.js";import"./index-CbOp89og.js";import"./zoom-jj1jlWM7.js";import"./button-DwurTV-5.js";import"./index-DwLMJULd.js";import"./ActionButton-GlizxOHx.js";import"./useLocale-DgW6ErAE.js";import"./index-Bw6sYPsB.js";import"./index-DKvSL8C2.js";import"./PurePanel-BBLJmiT4.js";import"./index-CdhNzL3b.js";import"./row-AI_3Apdy.js";import"./index-BL4lJwOz.js";import"./index-DAn3c1PP.js";import"./DownOutlined-eKTYEdw_.js";const re=({auth:d,jabatan:a,search:p})=>{const[u,s]=l.useState(!1),[f,i]=l.useState(!1),[h,y]=l.useState(null);A().props;const[o,x]=T.useMessage(),g=()=>s(!0),b=()=>s(!1),k=()=>i(!1),j=e=>{y(e),i(!0)},M=e=>{console.log(e),r.delete(`/jabatan/${e}`).then(()=>{})},J=e=>{r.get(route("singkat")+"/admin/jabatan",{search:e},{replace:!0})};async function S(e){if(route("singkat")+"",e=preparePAK(e),e.file===null){o.open({key:"add-form",type:"error",content:"Mohon lampirkan dokumen PAK"}),addForm.setFields({file:{errors:["mohon tambahkan file"]}});return}try{o.open({key:"add-form",type:"loading",content:"menambahkan PAK..."});const n=await m.post(route("singkat")+"/capaian",e,{headers:{"Content-Type":"multipart/form-data"}});o.open({key:"add-form",type:"success",content:"PAK sudah ditambahkan"})}catch(n){console.log({error:n}),o.open({key:"add-form",type:"error",content:n.response.data.message})}finally{r.get(route("singkat")+"/kelola-ckp",{search:p},{preserveState:!0}),s(!1)}}const v=async e=>{try{o.open({type:"loading",key:"handle-save",content:"Menyimpan perubahan..."});const n=await m.patch(route("singkat")+`/jabatan/${e.id}`,e,{headers:{"Content-Type":"application/json"}});o.open({type:"success",key:"handle-save",content:"Berhasil menyimpan perubahan"})}catch{o.open({type:"error",key:"handle-save",content:"Terjadi kesalahan"})}finally{i(!1),r.reload({preserveState:!0})}};return t.jsxs(P,{title:"Jabatan",user:d.user,children:[x,t.jsx(E,{title:"Kelola Jabatan"}),t.jsx(K,{pageName:"Kelola Jabatan"}),t.jsxs("div",{className:"flex flex-row sm:justify-between mb-5",children:[t.jsx(C,{initialQuery:p,handleSearch:J}),t.jsx("div",{children:t.jsxs("button",{onClick:g,className:" gap-2.5 rounded-md    inline-flex items-center justify-center bg-meta-3 py-2 px-5  text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:[t.jsx(I,{}),"Tambah Jabatan"]})})]}),t.jsxs("div",{className:"flex flex-col gap-10",children:[t.jsx(F,{jabatan:a,onEdit:j,onDelete:M}),t.jsx(w,{links:a.links,currentPage:a.current_page,lastPage:a.last_page,from:a.from,to:a.to,total:a.total})]}),t.jsx(c,{visible:u,onFinish:S,onCancel:b}),t.jsx(c,{visible:f,onCancel:k,jabatan:h,onFinish:v})]})};export{re as default};
