import{r as s,j as e,y as f}from"./app-BKJY4YWz.js";import{F as r}from"./index-fnTQ2R4P.js";import{M as g}from"./index-CYwRI9iO.js";import{S as n}from"./index-DoEnEz9a.js";import{T as m}from"./index-7q6KC7lY.js";import"./PurePanel-BwRILxwh.js";import"./index-BWEEZemA.js";import"./motion-Db2xci-V.js";import"./zoom-j3DgVdf6.js";import"./row-ZHVTgW77.js";import"./index-Itt_kyJq.js";import"./index-CF2UqtEp.js";import"./useLocale-L6Wt6RyJ.js";import"./SearchOutlined-M6lAbnbo.js";import"./index-DpbQZBri.js";import"./BaseInput-CvXDMhyo.js";import"./index-C5fZKDoR.js";const U=({visible:d,onCancel:l,jabatan:F,unitKerja:p})=>{const[o]=r.useForm(),[u,c]=s.useState([]),[b,h]=s.useState(null),j=async a=>{h(a);try{const t=await axios.get("/api/get-available-jabatan",{params:{unit_kerja_id:a}});c(t.data.map(i=>({value:i.id,label:i.nama})))}catch(t){console.error("Failed to fetch jabatan:",t)}},k=(a,t)=>{const i=o.getFieldValue("abk");return t>=0&&t<=i?Promise.resolve():Promise.reject(new Error("Nilai Eksisting tidak boleh lebih dari nilai ABK!"))},x=a=>{f.post("/kelola-abk",a),o.resetFields(),l()};return e.jsx(g,{title:"Tambah ABK",open:d,onCancel:l,onOk:()=>o.submit(),width:600,okText:"Tambah",cancelText:"Batal",children:e.jsxs(r,{form:o,name:"control-hooks",onFinish:x,style:{maxWidth:600},layout:"vertical",wrapperCol:{span:24},autoComplete:"off",size:"large",children:[e.jsx(r.Item,{name:"unit_kerja_id",label:"Satuan Kerja",rules:[{required:!0}],children:e.jsx(n,{placeholder:"Pilih Satuan Kerja",allowClear:!0,showSearch:!0,optionFilterProp:"label",options:p.map(a=>({value:a.id,label:a.nama})),onChange:j})}),e.jsx(r.Item,{name:"jabatan_id",label:"Jabatan",rules:[{required:!0}],initialValue:null,children:e.jsx(n,{placeholder:"Pilih Jabatan",showSearch:!0,optionFilterProp:"label",disabled:!b,options:u})}),e.jsx(r.Item,{name:"abk",label:"ABK",rules:[{required:!0,message:"ABK tidak boleh kosong."}],children:e.jsx(m,{className:"border w-full border-slate-400 rounded-md"})}),e.jsx(r.Item,{name:"eksisting",label:"Eksisting",rules:[{validator:k}],children:e.jsx(m,{className:"border w-full border-slate-400 rounded-md"})})]})})};export{U as default};
