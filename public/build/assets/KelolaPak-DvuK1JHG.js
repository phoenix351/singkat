import{r as s,j as a,Y as N,a as d,y as i}from"./app-DFnwsWrs.js";import{A as O}from"./AuthenticatedLayout-DXhdXRqs.js";import D from"./TablePak-DA7Pa7Vz.js";import{B as z}from"./Breadcrumb-DJhJcPHU.js";import{S as V,P as G}from"./Pagination-iqAnRRKE.js";import L from"./ExportModal-CB0dKrtq.js";import k from"./PegawaiForm-CTxQDoEh.js";import{d as g}from"./dayjs.min-DmyZntuv.js";import{F as x}from"./index-D6qsxmpK.js";import{s as U}from"./index-DKSCozep.js";import"./Header-CPa2CG7Q.js";import"./index-BbNNQxMk.js";import"./index-7Nr_NS3U.js";import"./zoom-B0W9qZb7.js";import"./button-Bz9USzm7.js";import"./index-noO_gH--.js";import"./ActionButton-CtM_w2vP.js";import"./useLocale-Bol56ME6.js";import"./index-BZT0KOT1.js";import"./index-CxLqXYg-.js";import"./PurePanel-CRgtzXFw.js";import"./index-Bo0gIfVv.js";import"./row-PkYKM1PI.js";import"./index-Ch6NPk6K.js";import"./BaseInput-DmJDSday.js";import"./index-CdkzHvRD.js";import"./DownOutlined-N7VHuyP1.js";import"./index-zPBp9yDv.js";import"./index-BcJBgg6P.js";const be=({auth:n,pegawai:r,search:y,jabatan:c,unitKerja:u})=>{const[b]=x.useForm(),[l]=x.useForm(),[t,f]=U.useMessage(),[j,p]=s.useState(!1),[_,m]=s.useState(!1),[M,S]=s.useState(null),[P,h]=s.useState(!1),w=()=>p(!0),v=()=>p(!1),E=()=>h(!0),F=()=>h(!1),A=e=>{S(e),m(!0)},C=()=>m(!1),B=async e=>{try{t.open({type:"loading",content:"Menghapus data pegawai",key:"handle-delete"});const o=d.delete(route("singkat.admin.pak.delete",{id:e}));t.open({type:"success",content:"Berhasil menyimpan perubahan",key:"handle-delete"})}catch{t.open({type:"error",content:"Gagal menghapus, periksa kembali !",key:"handle-delete"})}finally{i.reload({preserveState:!0,preserveScroll:!0,method:"get"})}},I=e=>{i.get(route("singkat.kelola-pak"),{search:e},{replace:!0})},T=async e=>{try{t.open({type:"loading",content:"Menyimpan perubahan",key:"handle-save"}),e.bulan_mulai=e.bulan[0],e.bulan_selesai=e.bulan[1],delete e.bulan;const o=d.put(route("singkat.admin.pak.update",{pegawai:e.id}),e,{headers:{"Content-Type":"application/json"}});t.open({type:"success",content:"Berhasil menyimpan perubahan",key:"handle-save"})}catch{t.open({type:"error",content:"Gagal menyimpan, hubungi pengembang web!",key:"handle-save"})}finally{m(!1),i.reload({preserveState:!0,preserveScroll:!0})}},K=async e=>{try{t.open({type:"loading",content:"Menambahkan pegawai",key:"handle-create"}),e.bulan_mulai=e.bulan[0],e.bulan_selesai=e.bulan[1],delete e.bulan;const o=await d.post(route("singkat.admin.pak.store"),e,{headers:{"Content-Type":"application/json"}});t.open({type:"success",content:"Berhasil menambahkan pegawai",key:"handle-create"})}catch{t.open({type:"error",content:"Gagal menambahkan, periksa kembali isian !",key:"handle-create"})}finally{p(!1),i.reload({preserveState:!0,preserveScroll:!0})}};return a.jsxs(O,{user:n.user,children:[f,a.jsx(N,{title:n.user.role=="viewer"?"PAK":"Kelola PAK"}),a.jsx(z,{pageName:n.user.role=="viewer"?"PAK":"Kelola PAK"}),a.jsxs("div",{className:"flex flex-row sm:justify-between mb-5",children:[a.jsx(V,{initialQuery:y,handleSearch:I}),a.jsxs("div",{children:[a.jsxs("button",{onClick:E,type:"button",className:"inline-flex items-center justify-center gap-2.5 rounded-md bg-primary py-2 px-5 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:[a.jsx("span",{children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),"Unduh Data"]}),["operator"].includes(n.user.role)&&a.jsx("button",{onClick:()=>{l.resetFields(),l.setFieldsValue({id:340060268,nip_bps:"340060268",nip:"199810132021041001",nama:"Ponimin, S.Tr.Stat.",jabatan_id:"39",unit_kerja:"BPS P",pangkat_golongan_ruang:"Penata Tk.I / IIId",angka_kredit_konvensional:"313.898",angka_kredit_integrasi:"113.898",predikat_kinerja:"Sangat Baik",tambahan_ijazah:null,akumulasi_ak:"151.398",ijazah_terakhir:"S1/DIV/Sederajat",tanggal_lahir:"1971-02-05",nama_jabatan:"Statistisi Ahli Muda",angka_kredit_akumulasi:151.398,tambahan_ijazah:"Baik",bulan:[g(),g()],predikat_id:"1",angka_kredit_dasar:40,akumulasi_ak:47.125}),w()},className:" gap-2.5 rounded-md    inline-flex items-center justify-center bg-meta-3 py-2 px-5  text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:"Tambah Pegawai"})]})]}),a.jsxs("div",{className:"flex flex-col gap-10",children:[a.jsx(D,{pegawai:r,onEdit:A,onDelete:B,role:n.user.role}),a.jsx(G,{links:r.links,currentPage:r.current_page,lastPage:r.last_page,total:r.total,from:r.from,to:r.to})]}),a.jsx(k,{jabatan:c,unitKerja:u,visible:j,onCancel:v,role:n.user.role,onFinish:K,type:"create",title:"Tambah Pegawai",form:l},"create-form"),a.jsx(k,{jabatan:c,unitKerja:u,visible:_,onCancel:C,pegawai:M,role:n.user.role,onFinish:T,type:"edit",title:"Ubah Data Pegawai",form:b},"edit-form"),a.jsx(L,{visible:P,onCancel:F})]})};export{be as default};
