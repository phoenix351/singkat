import{r as i,q as S,j as e,Y as U,y as j}from"./app-DG4lkm6I.js";import{A as N}from"./AuthenticatedLayout-DihFFGMg.js";import{B as R,S as D,P}from"./Pagination-EgFfowgk.js";import I from"./TableABK-DegSEnSF.js";import T from"./AddAbkForm-CPe91rKI.js";import F from"./EditAbkForm-CwAoz8Pc.js";import{A as a}from"./Alert-pw5LFUir.js";import{u as l,w as V}from"./xlsx-YQvpTstd.js";import"./Header-CS4FZP7E.js";import"./index-DPovuAtR.js";import"./index-BOoDnPea.js";import"./zoom-CYFUwcOb.js";import"./compact-item-CWVgPv4E.js";import"./index-CPNKc2Cg.js";import"./ActionButton-BmFTjVmE.js";import"./button-B7yed1Qm.js";import"./useLocale-Bn5sQBMJ.js";import"./index-C85wRqGF.js";import"./index-bg-KSOeg.js";import"./PurePanel-X1WZuywX.js";import"./row-B-yTj_Is.js";import"./index-CP26vVl7.js";import"./index-CdRAOwz7.js";import"./index-CQGu2i8L.js";import"./index-CTG7GsG4.js";import"./BaseInput-QhogEnYX.js";const fe=({auth:r,abk:o,search:p,jabatan:c,unitKerja:m})=>{const[b,d]=i.useState(!1),[k,x]=i.useState(!1),[g,w]=i.useState(null),{errors:t,flash:u}=S().props,y=()=>d(!0),A=()=>d(!1),v=()=>x(!1),B=s=>{w(s),x(!0)},K=s=>{j.delete(`/kelola-abk/${s}`).then(()=>{})},M=async s=>{const{data:E}=await axios.get(route("abk.fetch",{search:s})),f=l.book_new(),C=l.json_to_sheet(E);l.book_append_sheet(f,C,"abk");const L=V(f,{bookType:"xlsx",type:"array"}),O=new Blob([L],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),h=URL.createObjectURL(O),n=document.createElement("a");n.href=h,n.download="data_abk.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(h),setOpenUnduhModal(!1)},_=s=>{j.get("/singkat/kelola-abk",{search:s},{replace:!0})};return e.jsxs(N,{title:"User",user:r.user,children:[u.success&&e.jsx(a,{tipe:"success",pesan:u.success}),t.abk&&e.jsx(a,{tipe:"error",pesan:t.abk}),t.jabatan&&e.jsx(a,{tipe:"error",pesan:t.jabatan}),t.unit_kerja&&e.jsx(a,{tipe:"error",pesan:t.unit_kerja}),t.eksisting&&e.jsx(a,{tipe:"error",pesan:t.eksisting}),e.jsx(U,{title:r.user.role=="viewer"?"ABK":"Kelola ABK"}),e.jsx(R,{pageName:r.user.role=="viewer"?"ABK":"Kelola ABK"}),e.jsxs("div",{className:"flex flex-row sm:justify-between mb-5",children:[e.jsx(D,{initialQuery:p,handleSearch:_}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>M(p),type:"button",className:"inline-flex items-center justify-center gap-2.5 rounded-md bg-primary py-2 px-5 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:[e.jsx("span",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),"Unduh Data"]}),["operator"].includes(r.user.role)&&e.jsx("button",{onClick:y,className:" gap-2.5 rounded-md    inline-flex items-center justify-center bg-meta-3 py-2 px-5  text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:"Tambah ABK"})]})]}),e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx(I,{abk:o,onEdit:B,onDelete:K,role:r.user.role}),e.jsx(P,{links:o.links,currentPage:o.current_page,lastPage:o.last_page,from:o.from,to:o.to,total:o.total})]}),e.jsx(T,{visible:b,onCancel:A,jabatan:c,unitKerja:m}),e.jsx(F,{visible:k,onCancel:v,abk:g,jabatan:c,unitKerja:m,role:r.user.role})]})};export{fe as default};
