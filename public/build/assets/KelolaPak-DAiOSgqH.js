import{r as l,j as e,Y as T,y as s,b as c}from"./app-DG4lkm6I.js";import{A as N}from"./AuthenticatedLayout-DihFFGMg.js";import O from"./TablePak-fMPq0s3W.js";import{B as D,S as z,P as V}from"./Pagination-EgFfowgk.js";import G from"./ExportModal-PZtss-ud.js";import k from"./PegawaiForm-9nlJLUMh.js";import{F as g}from"./index-bg-KSOeg.js";import{s as L}from"./index-Cw_285zN.js";import"./Header-CS4FZP7E.js";import"./index-DPovuAtR.js";import"./index-BOoDnPea.js";import"./zoom-CYFUwcOb.js";import"./compact-item-CWVgPv4E.js";import"./index-CPNKc2Cg.js";import"./ActionButton-BmFTjVmE.js";import"./button-B7yed1Qm.js";import"./useLocale-Bn5sQBMJ.js";import"./index-C85wRqGF.js";import"./index-CP26vVl7.js";import"./PurePanel-X1WZuywX.js";import"./index-DXcwbtgN.js";import"./row-B-yTj_Is.js";import"./index-jsO2WCLV.js";import"./index-CQGu2i8L.js";import"./TextArea-Q31wMMF0.js";import"./BaseInput-QhogEnYX.js";import"./index-CdRAOwz7.js";import"./index-CTG7GsG4.js";const xe=({auth:r,pegawai:o,search:x,jabatan:d,unitKerja:u})=>{const[y]=g.useForm(),[i]=g.useForm(),[t,f]=L.useMessage(),[b,p]=l.useState(!1),[j,m]=l.useState(!1),[v,M]=l.useState(null),[S,h]=l.useState(!1),_=()=>p(!0),w=()=>p(!1),P=()=>h(!0),E=()=>h(!1),F=a=>{M(a),m(!0)},A=()=>m(!1),B=async a=>{s.delete(`/kelola-pak/${a}`).then(()=>{});try{t.open({type:"loading",content:"Menghapus data pegawai",key:"handle-delete"});const n=c.delete(`/kelola-pak/${a}`);t.open({type:"success",content:"Berhasil menyimpan perubahan",key:"handle-delete"})}catch{t.open({type:"error",content:"Gagal menghapus, periksa kembali !",key:"handle-delete"})}finally{s.reload({preserveState:!0,preserveScroll:!0,method:"get"})}},C=a=>{s.get(route("kelola-pak"),{search:a},{replace:!0})},I=async a=>{try{t.open({type:"loading",content:"Menyimpan perubahan",key:"handle-save"});const n=c.put(`/kelola-pak/${a.id}`,a,{headers:{"Content-Type":"application/json"}});t.open({type:"success",content:"Berhasil menyimpan perubahan",key:"handle-save"})}catch{t.open({type:"error",content:"Gagal menyimpan, hubungi pengembang web!",key:"handle-save"})}finally{m(!1),s.reload({preserveState:!0,preserveScroll:!0,method:"get"})}},K=async a=>{try{t.open({type:"loading",content:"Menambahkan pegawai",key:"handle-create"});const n=await c.post("/kelola-pak",a,{headers:{"Content-Type":"application/json"}});t.open({type:"success",content:"Berhasil menambahkan pegawai",key:"handle-create"})}catch{t.open({type:"error",content:"Gagal menambahkan, periksa kembali isian !",key:"handle-create"})}finally{p(!1),s.reload({preserveState:!0,preserveScroll:!0})}};return e.jsxs(N,{user:r.user,children:[f,e.jsx(T,{title:r.user.role=="viewer"?"PAK":"Kelola PAK"}),e.jsx(D,{pageName:r.user.role=="viewer"?"PAK":"Kelola PAK"}),e.jsxs("div",{className:"flex flex-row sm:justify-between mb-5",children:[e.jsx(z,{initialQuery:x,handleSearch:C}),e.jsxs("div",{children:[e.jsxs("button",{onClick:P,type:"button",className:"inline-flex items-center justify-center gap-2.5 rounded-md bg-primary py-2 px-5 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:[e.jsx("span",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),"Unduh Data"]}),["operator"].includes(r.user.role)&&e.jsx("button",{onClick:()=>{i.resetFields(),i.setFieldsValue({id:340013053,nip_bps:"340013053",nip:"197102051992022001",nama:"Johanna Maria Farida Tampemawa, S.E.",jabatan_id:"39",unit_kerja:"BPS Kota Bitung",pangkat_golongan_ruang:"Penata Tk.I / IIId",angka_kredit_konvensional:"313.898",angka_kredit_integrasi:"113.898",predikat_kinerja:"Sangat Baik",tambahan_ijazah:null,akumulasi_ak:"151.398",ijazah_terakhir:"S1/DIV/Sederajat",tanggal_lahir:"1971-02-05",nama_jabatan:"Statistisi Ahli Muda",angka_kredit_akumulasi:151.398,tambahan_ijazah:"Baik"}),_()},className:" gap-2.5 rounded-md    inline-flex items-center justify-center bg-meta-3 py-2 px-5  text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:"Tambah Pegawai"})]})]}),e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx(O,{pegawai:o,onEdit:F,onDelete:B,role:r.user.role}),e.jsx(V,{links:o.links,currentPage:o.current_page,lastPage:o.last_page,total:o.total,from:o.from,to:o.to})]}),e.jsx(k,{jabatan:d,unitKerja:u,visible:b,onCancel:w,role:r.user.role,onFinish:K,type:"create",title:"Tambah Pegawai",form:i},"create-form"),e.jsx(k,{jabatan:d,unitKerja:u,visible:j,onCancel:A,pegawai:v,role:r.user.role,onFinish:I,type:"edit",title:"Ubah Data Pegawai",form:y},"edit-form"),e.jsx(G,{visible:S,onCancel:E})]})};export{xe as default};
