import{r as n,j as e,y as g}from"./app-DG4lkm6I.js";import{F as o}from"./index-bg-KSOeg.js";import{M as F}from"./index-CP26vVl7.js";import{S as m}from"./index-CdRAOwz7.js";import{T as d}from"./index-CTG7GsG4.js";import"./PurePanel-X1WZuywX.js";import"./index-BOoDnPea.js";import"./compact-item-CWVgPv4E.js";import"./zoom-CYFUwcOb.js";import"./row-B-yTj_Is.js";import"./index-DPovuAtR.js";import"./useLocale-Bn5sQBMJ.js";import"./ActionButton-BmFTjVmE.js";import"./button-B7yed1Qm.js";import"./index-CQGu2i8L.js";import"./index-C85wRqGF.js";import"./BaseInput-QhogEnYX.js";const U=({visible:p,onCancel:l,jabatan:S,unitKerja:u})=>{const[t]=o.useForm(),[c,b]=n.useState([]),[h,j]=n.useState(null),k=async a=>{j(a);try{const r=await axios.get("/api/get-available-jabatan",{params:{unit_kerja_id:a}});b(r.data.map(i=>({value:i.id,label:i.nama})))}catch(r){console.error("Failed to fetch jabatan:",r)}},x=(a,r)=>{const i=t.getFieldValue("abk"),s=t.getFieldValue("jabatan_id");return console.log({jabatan_id:s}),s===55||r>=0&&r<=i?Promise.resolve():Promise.reject(new Error("Nilai Eksisting tidak boleh lebih dari nilai ABK!"))},f=a=>{g.post("/kelola-abk",a),t.resetFields(),l()};return e.jsx(F,{title:"Tambah ABK",open:p,onCancel:l,onOk:()=>t.submit(),width:600,okText:"Tambah",cancelText:"Batal",children:e.jsxs(o,{form:t,name:"control-hooks",onFinish:f,onValuesChange:()=>t.validateFields(),style:{maxWidth:600},layout:"vertical",wrapperCol:{span:24},autoComplete:"off",size:"large",children:[e.jsx(o.Item,{name:"unit_kerja_id",label:"Satuan Kerja",rules:[{required:!0}],children:e.jsx(m,{placeholder:"Pilih Satuan Kerja",allowClear:!0,showSearch:!0,optionFilterProp:"label",options:u.map(a=>({value:a.id,label:a.nama})),onChange:k})}),e.jsx(o.Item,{name:"jabatan_id",label:"Jabatan",rules:[{required:!0}],initialValue:null,children:e.jsx(m,{placeholder:"Pilih Jabatan",showSearch:!0,optionFilterProp:"label",disabled:!h,options:c})}),e.jsx(o.Item,{name:"abk",label:"ABK",rules:[{required:!0,message:"ABK tidak boleh kosong."}],children:e.jsx(d,{className:"border w-full border-slate-400 rounded-md"})}),e.jsx(o.Item,{name:"eksisting",label:"Eksisting",rules:[{validator:x}],children:e.jsx(d,{className:"border w-full border-slate-400 rounded-md"})})]})})};export{U as default};
