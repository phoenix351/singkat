import{r as n,j as e,Y as I,y as a,a as x}from"./app-BKJY4YWz.js";import{A as T}from"./AuthenticatedLayout-CJgoqSmC.js";import D from"./TablePak-U2kRr8HZ.js";import{B as L,S as G,P as V}from"./Pagination-DQDND7Ex.js";import _ from"./ExportModal-DDGWOuN6.js";import h from"./PegawaiForm-DiBA-BUx.js";import{F as f}from"./index-fnTQ2R4P.js";import{s as $}from"./index-CIfUaNQx.js";import"./index-Itt_kyJq.js";import"./index-BWEEZemA.js";import"./index-CF2UqtEp.js";import"./motion-Db2xci-V.js";import"./zoom-j3DgVdf6.js";import"./index-CHILXjkW.js";import"./useLocale-L6Wt6RyJ.js";import"./index-DpbQZBri.js";import"./index-CYwRI9iO.js";import"./PurePanel-BwRILxwh.js";import"./index-DQFAOCkZ.js";import"./row-ZHVTgW77.js";import"./index-DWJMk0Vo.js";import"./index-C5fZKDoR.js";import"./BaseInput-CvXDMhyo.js";import"./SearchOutlined-M6lAbnbo.js";import"./index-DoEnEz9a.js";import"./index-7q6KC7lY.js";const he=({auth:o,pegawai:r,search:y,jabatan:c,unitKerja:m})=>{const[g]=f.useForm(),[d]=f.useForm(),[s,k]=$.useMessage(),[b,l]=n.useState(!1),[j,i]=n.useState(!1),[v,M]=n.useState(null),[w,u]=n.useState(!1),P=()=>l(!0),E=()=>l(!1),S=()=>u(!0),C=()=>u(!1),F=t=>{M(t),i(!0)},A=()=>i(!1),K=t=>{a.delete(`/kelola-pak/${t}`).then(()=>{})},N=t=>{a.get("/kelola-pak",{search:t},{replace:!0})},O=async t=>{try{s.open({type:"loading",content:"Menyimpan perubahan",key:"handle-save"});const p=x.patch(`/kelola-pak/${t.id}`,t,{headers:{"Content-Type":"application/json"}});s.open({type:"success",content:"Berhasil menyimpan perubahan",key:"handle-save"})}catch{s.open({type:"error",content:"Gagal menyimpan, hubungi pengembang web!",key:"handle-save"})}finally{i(!1),a.reload({preserveState:!0,preserveScroll:!0,method:"get"})}},B=t=>{try{s.open({type:"loading",content:"Menambahkan pegawai",key:"handle-create"});const p=x.post("/kelola-pak",t,{headers:{"Content-Type":"application/json"}});s.open({type:"success",content:"Berhasil menambahkan pegawai",key:"handle-create"})}catch{s.open({type:"error",content:"Gagal menambahkan, hubungi pengembang web!",key:"handle-create"})}finally{l(!1),a.reload({preserveState:!0,preserveScroll:!0})}};return e.jsxs(T,{user:o.user,children:[k,e.jsx(I,{title:o.user.role=="viewer"?"PAK":"Kelola PAK"}),e.jsx(L,{pageName:o.user.role=="viewer"?"PAK":"Kelola PAK"}),e.jsxs("div",{className:"flex flex-row sm:justify-between mb-5",children:[e.jsx(G,{initialQuery:y,handleSearch:N}),e.jsxs("div",{children:[e.jsxs("button",{onClick:S,type:"button",className:"inline-flex items-center justify-center gap-2.5 rounded-md bg-primary py-2 px-5 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:[e.jsx("span",{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),"Unduh Data"]}),(o.user.role==="admin"||o.user.role==="super admin")&&e.jsx("button",{onClick:()=>{d.resetFields(),P()},className:" gap-2.5 rounded-md    inline-flex items-center justify-center bg-meta-3 py-2 px-5  text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:"Tambah Pegawai"})]})]}),e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx(D,{pegawai:r,onEdit:F,onDelete:K,role:o.user.role}),e.jsx(V,{links:r.links,currentPage:r.current_page,lastPage:r.last_page,total:r.total,from:r.from,to:r.to})]}),e.jsx(h,{jabatan:c,unitKerja:m,visible:b,onCancel:E,role:o.user.role,onFinish:B,type:"create",form:d},"create-form"),e.jsx(h,{jabatan:c,unitKerja:m,visible:j,onCancel:A,pegawai:v,role:o.user.role,onFinish:O,type:"edit",form:g},"edit-form"),e.jsx(_,{visible:w,onCancel:C})]})};export{he as default};
