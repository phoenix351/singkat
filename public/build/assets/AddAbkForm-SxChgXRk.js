import{r as n,j as e,y as f}from"./app-DFnwsWrs.js";import{F as o}from"./index-D6qsxmpK.js";import{M as F}from"./index-CxLqXYg-.js";import{S as m}from"./index-CdkzHvRD.js";import{T as d}from"./index-zPBp9yDv.js";import"./PurePanel-CRgtzXFw.js";import"./index-7Nr_NS3U.js";import"./button-Bz9USzm7.js";import"./zoom-B0W9qZb7.js";import"./BaseInput-DmJDSday.js";import"./row-PkYKM1PI.js";import"./index-BbNNQxMk.js";import"./useLocale-Bol56ME6.js";import"./ActionButton-CtM_w2vP.js";import"./index-BZT0KOT1.js";import"./DownOutlined-N7VHuyP1.js";const O=({visible:u,onCancel:l,jabatan:S,unitKerja:p})=>{const[t]=o.useForm(),[c,b]=n.useState([]),[h,j]=n.useState(null),k=async a=>{j(a);try{const r=await axios.get("/api/get-available-jabatan",{params:{unit_kerja_id:a}});b(r.data.map(i=>({value:i.id,label:i.nama})))}catch(r){console.error("Failed to fetch jabatan:",r)}},x=(a,r)=>{const i=t.getFieldValue("abk"),s=t.getFieldValue("jabatan_id");return console.log({jabatan_id:s}),s===55||r>=0&&r<=i?Promise.resolve():Promise.reject(new Error("Nilai Eksisting tidak boleh lebih dari nilai ABK!"))},g=a=>{f.post(route("singkat.admin.abk.store"),a),t.resetFields(),l()};return e.jsx(F,{title:"Tambah ABK",open:u,onCancel:l,onOk:()=>t.submit(),width:600,okText:"Tambah",cancelText:"Batal",children:e.jsxs(o,{form:t,name:"control-hooks",onFinish:g,onValuesChange:()=>t.validateFields(),style:{maxWidth:600},layout:"vertical",wrapperCol:{span:24},autoComplete:"off",size:"large",children:[e.jsx(o.Item,{name:"unit_kerja_id",label:"Satuan Kerja",rules:[{required:!0}],children:e.jsx(m,{placeholder:"Pilih Satuan Kerja",allowClear:!0,showSearch:!0,optionFilterProp:"label",options:p.map(a=>({value:a.id,label:a.nama})),onChange:k})}),e.jsx(o.Item,{name:"jabatan_id",label:"Jabatan",rules:[{required:!0}],initialValue:null,children:e.jsx(m,{placeholder:"Pilih Jabatan",showSearch:!0,optionFilterProp:"label",disabled:!h,options:c})}),e.jsx(o.Item,{name:"abk",label:"ABK",rules:[{required:!0,message:"ABK tidak boleh kosong."}],children:e.jsx(d,{className:"border w-full border-slate-400 rounded-md"})}),e.jsx(o.Item,{name:"eksisting",label:"Eksisting",rules:[{validator:x}],children:e.jsx(d,{className:"border w-full border-slate-400 rounded-md"})})]})})};export{O as default};
