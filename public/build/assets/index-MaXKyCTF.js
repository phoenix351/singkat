import{r as c,j as a,Y as T,a as u,y as l}from"./app-D_OB5lB0.js";import{A as K}from"./AuthenticatedLayout-BViSrbYa.js";import N from"./TablePak-_Vcg0_Vv.js";import{B as O}from"./Breadcrumb-CQBnXcKy.js";import{S as D,P as V}from"./Pagination-CPSxFH7K.js";import z from"./ExportModal-CgQ0B4Gc.js";import b from"./PegawaiForm-myIVkxQW.js";import{d as p}from"./dayjs.min-mdDIvxb_.js";import{F as x}from"./index-DKvSL8C2.js";import{s as G}from"./index-DEkIiiNJ.js";import{R as L}from"./PlusOutlined-DZ7tDEHl.js";import"./Header-56Cko1Qe.js";import"./index-CJaVn-ZZ.js";import"./index-CbOp89og.js";import"./zoom-jj1jlWM7.js";import"./button-DwurTV-5.js";import"./index-DwLMJULd.js";import"./ActionButton-GlizxOHx.js";import"./useLocale-DgW6ErAE.js";import"./index-Bw6sYPsB.js";import"./index-BL4lJwOz.js";import"./PurePanel-BBLJmiT4.js";import"./index-B_Bk2usy.js";import"./index-0GALbpcv.js";import"./row-AI_3Apdy.js";import"./index-CdhNzL3b.js";import"./index-pdXJTcLb.js";import"./DownOutlined-eKTYEdw_.js";import"./index-DAn3c1PP.js";import"./index-BQRFpkBw.js";const ye=({auth:n,pegawai:r,search:y,jabatan:h,unitKerja:k})=>{const[s]=x.useForm(),[i]=x.useForm(),[t,f]=G.useMessage(),[j,m]=c.useState(!1),[_,d]=c.useState(!1),[M,g]=c.useState(!1),S=()=>m(!0),P=()=>{m(!1),i.resetFields()},F=()=>g(!0),w=()=>g(!1),v=e=>{e&&(e.bulan_mulai?e.bulan=[p(e.bulan_mulai),p(e.bulan_selesai)]:e.bulan=[null,null]),s.setFieldsValue(e),d(!0)},E=()=>{d(!1),s.resetFields()},A=async e=>{try{t.open({type:"loading",content:"Menghapus data pegawai",key:"handle-delete"});const o=u.delete(route("singkat.admin.pegawai.destroy",{pegawai:e}));t.open({type:"success",content:"Berhasil menyimpan perubahan",key:"handle-delete"})}catch{t.open({type:"error",content:"Gagal menghapus, periksa kembali !",key:"handle-delete"})}finally{l.reload({preserveState:!0,preserveScroll:!0,method:"get"}),s.resetFields()}},I=e=>{l.get(route("singkat.admin.pegawai"),{search:e},{replace:!0})},B=async e=>{try{t.open({type:"loading",content:"Menyimpan perubahan",key:"handle-save"}),e.bulan&&(e.bulan_mulai=e.bulan[0],e.bulan_selesai=e.bulan[1],delete e.bulan);const o=u.put(route("singkat.admin.pegawai.update",{pegawai:e.id}),e,{headers:{"Content-Type":"application/json"}});t.open({type:"success",content:"Berhasil menyimpan perubahan",key:"handle-save"})}catch(o){console.log({error:o}),t.open({type:"error",content:"Gagal menyimpan, hubungi pengembang web!",key:"handle-save"})}finally{d(!1),l.reload({preserveState:!0,preserveScroll:!0})}},C=async e=>{try{t.open({type:"loading",content:"Menambahkan pegawai",key:"handle-create"}),e.bulan_mulai=e.bulan[0],e.bulan_selesai=e.bulan[1],delete e.bulan;const o=await u.post(route("singkat.admin.pegawai.store"),e,{headers:{"Content-Type":"application/json"}});t.open({type:"success",content:"Berhasil menambahkan pegawai",key:"handle-create"})}catch{t.open({type:"error",content:"Gagal menambahkan, periksa kembali isian !",key:"handle-create"})}finally{m(!1),l.reload({preserveState:!0,preserveScroll:!0})}};return a.jsxs(K,{user:n.user,children:[f,a.jsx(T,{title:n.user.role=="viewer"?"PAK":"Kelola PAK"}),a.jsx(O,{pageName:n.user.role=="viewer"?"PAK":"Kelola PAK"}),a.jsxs("div",{className:"flex flex-row sm:justify-between mb-5",children:[a.jsx(D,{initialQuery:y,handleSearch:I}),a.jsxs("div",{children:[a.jsxs("button",{onClick:F,type:"button",className:"inline-flex items-center justify-center gap-2.5 rounded-md bg-primary py-2 px-5 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:[a.jsx("span",{children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),"Unduh Data"]}),["operator"].includes(n.user.role)&&a.jsxs("button",{onClick:()=>{i.resetFields(),i.setFieldsValue({id:340060268,nip_bps:"340060268",nip:"199810132021041001",nama:"Ponimin, S.Tr.Stat.",jabatan_id:"39",unit_kerja:"BPS P",pangkat_golongan_ruang:"Penata Tk.I / IIId",angka_kredit_konvensional:"313.898",angka_kredit_integrasi:"113.898",predikat_kinerja:"Sangat Baik",tambahan_ijazah:null,akumulasi_ak:"151.398",ijazah_terakhir:"S1/DIV/Sederajat",tanggal_lahir:"1971-02-05",nama_jabatan:"Statistisi Ahli Muda",angka_kredit_akumulasi:151.398,tambahan_ijazah:"Baik",bulan:[p(),p()],predikat_id:"1",angka_kredit_dasar:40,akumulasi_ak:47.125}),S()},className:" gap-2.5 rounded-md    inline-flex items-center justify-center bg-meta-3 py-2 px-5  text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-5 mr-4",children:[a.jsx(L,{})," Tambah Pegawai"]})]})]}),a.jsxs("div",{className:"flex flex-col gap-10",children:[a.jsx(N,{pegawai:r,onEdit:v,onDelete:A,role:n.user.role}),a.jsx(V,{links:r.links,currentPage:r.current_page,lastPage:r.last_page,total:r.total,from:r.from,to:r.to})]}),a.jsx(b,{jabatan:h,unitKerja:k,visible:j,onCancel:P,role:n.user.role,onFinish:C,type:"create",title:"Tambah Pegawai",form:i},"create-form"),a.jsx(b,{jabatan:h,unitKerja:k,visible:_,onCancel:E,role:n.user.role,onFinish:B,type:"edit",title:"Ubah Data Pegawai",form:s},"edit-form"),a.jsx(z,{visible:M,onCancel:w})]})};export{ye as default};
